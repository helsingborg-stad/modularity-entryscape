/* Autosuggest dropdown */ 

.selectize-dropdown {
  @extend .c-paper;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  filter: unset;
  border: 1px solid #eee;
  box-shadow: none;
  margin-top: -2px;
  position: initial;
  padding-bottom: calc(#{$base}*1.5);

  .create {
    @extend .c-button; 
    @extend .c-button--sm;
    @extend .c-button__basic; 
    position: absolute;
    top: 0;
    right: 0;
    z-index: 9999;
    height: 46px;
    filter: unset;
    background-color: #fff;
    border-left: 2px solid #eee; 
    padding: 0 calc(#{$base}*1.5);
    margin-top: 1px;

    &:not(:disabled){
      padding-left: calc(#{$base}*2);
      padding-right: calc(#{$base}*2);
    }
  }

  .optgroup {
    @extend .c-collection; 

    &:before {
      display: none;
    }
  }

  .optgroup-header {
    @extend .c-typography__variant--meta;
    padding: calc(#{$base}*.5) calc(#{$base}*2); 
  }

  *[data-selectable] {
    @extend .c-collection__item; 
    border: unset; 
    padding: calc(#{$base}*.5) calc(#{$base}*2); 
  }

  *[data-selectable].active {
    @extend .c-collection__item; 
    border: unset; 
  }

  .selectize-dropdown-content {
    padding: unset;
    min-height: calc(#{$base}*7);
  }

}

/* Field */ 
.selectize-control.multi {
  .selectize-input.items,
  .selectize-input.has-items {
    display: flex;
    flex-wrap: wrap; 
    gap: #{$base};

    appearance: none;

    width: 100%;
    margin: 0;
    outline: 0;

    min-height: map-get($spacers, "6");
    padding: 11px map-get($spacers, "2");

    font-size: calc(#{$base}*2);
    line-height: calc(#{$base}*2); 

    border: 1px solid $color-form-fields;
    border-bottom: 2px solid trasparent;
    background: $color-white;
    background-size: calc(#{$base}*2);

    border-radius: $c-field-border-radius; 

    transition: color .1s ease, border-color .1s ease;
  }

  .selectize-input.dropdown-active {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }

  .selectize-input:focus,
  .selectize-input.focus {
    background-color: $color-white;
    border-bottom: 2px solid $color-in-action;
    box-shadow: unset;
  } 

  input[role="search"] {
    height: calc(#{$base}*3);  
    line-height: calc(#{$base}*3);
  }
}

/* Contained tags */ 
.item.esbItemFacet,
.item.esbItemTerm {
  animation: expand 400ms ease-in-out;

  @extend .c-tag;
  @extend .c-tag--default;

  white-space: nowrap;
  text-overflow: ellipsis;

  word-spacing: unset;
  width: unset;
  height: unset;
  display: unset;
  color: unset;
  line-height: unset;
  position: unset;
  margin: unset !important;

  &:hover {
    background-color: $color-primary;
    color: $color-primary-contrasting;
  }
}